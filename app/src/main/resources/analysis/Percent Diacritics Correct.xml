<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<opgraph xmlns="https://www.phon.ca/ns/opgraph" xmlns:nes="https://www.phon.ca/ns/node_editor" xmlns:oga="https://www.phon.ca/ns/opgraph-app" xmlns:ogcn="https://www.phon.ca/ns/opgraph-common-nodes" xmlns:opqry="https://phon.ca/ns/opgraph_query" xmlns:qry="http://phon.ling.mun.ca/ns/query">
    <graph id="root">
        <node id="cd7bd3146bd74bb3" name="Project" type="class:ca.phon.opgraph.nodes.reflect.ObjectNode">
            <extensions>
                <oga:settings>
                    <oga:property key="contextKey"><![CDATA[_project]]></oga:property>
                    <oga:property key="ca.phon.opgraph.nodes.reflect.ObjectNode.declaredClass"><![CDATA[ca.phon.project.Project]]></oga:property>
                </oga:settings>
                <oga:meta x="20" y="60"/>
            </extensions>
        </node>
        <node id="637e33845d18473d" name="Selected Sessions" type="class:ca.phon.opgraph.nodes.reflect.ObjectNode">
            <extensions>
                <oga:settings>
                    <oga:property key="contextKey"><![CDATA[_selectedSessions]]></oga:property>
                    <oga:property key="ca.phon.opgraph.nodes.reflect.ObjectNode.declaredClass"><![CDATA[java.util.ArrayList]]></oga:property>
                </oga:settings>
                <oga:meta x="20" y="341"/>
            </extensions>
        </node>
        <node id="9c31168616a24188" name="Setup Summary Table" type="class:ca.phon.app.opgraph.nodes.PhonScriptNode">
            <output name="table" type="ca.phon.query.report.datasource.DefaultTableDataSource"/>
            <extensions>
                <oga:settings>
                    <oga:property key="__script"><![CDATA[function init(inputs, outputs) {
	outputs.add("table", "", false, DefaultTableDataSource);
}

function run(context) {
	var table = new DefaultTableDataSource();
	var col = 0;
	table.setColumnTitle(col++, "Speaker");
	table.setColumnTitle(col++, "# Target");
	table.setColumnTitle(col++, "# Actual");
	table.setColumnTitle(col++, "# Correct");
	table.setColumnTitle(col++, "# Substituted");
	table.setColumnTitle(col++, "# Deleted");
	table.setColumnTitle(col++, "# Epenthesized");
	table.setColumnTitle(col++, "PDC");

	context.put("table", table);
}
]]></oga:property>
                </oga:settings>
                <oga:meta x="1306" y="617"/>
            </extensions>
        </node>
        <node id="f563662586134d9a" name="Parameters" type="class:ca.phon.app.opgraph.nodes.PhonScriptNode">
            <extensions>
                <oga:settings>
                    <oga:property key="filters.searchBy.searchBy"><![CDATA[Word]]></oga:property>
                    <oga:property key="filters.wordTiers.tiers"><![CDATA[Orthography]]></oga:property>
                    <oga:property key="__script"><![CDATA[var GroupFilter = require("lib/GroupFilter").GroupFilter;
var AlignedGroupFilter = require("lib/TierFilter").TierFilter;
var WordFilter = require("lib/WordFilter").WordFilter;
var TierList = require("lib/TierList").TierList;
var AlignedWordFilter = require("lib/TierFilter").TierFilter;
var PatternFilter = require("lib/PatternFilter").PatternFilter;
var PatternType = require("lib/PatternFilter").PatternType;
var PDC = require("lib/PDC").PDC;
var PDCOptions = require("lib/PDC").PDCOptions;
var ResultType = require("lib/PhonScriptConstants").ResultType;
var SyllableFilter = require("lib/SyllableFilter").SyllableFilter;
var SearchByOptions = require("lib/SearchByOptions").SearchByOptions;
var ParticipantFilter = require("lib/ParticipantFilter").ParticipantFilter;

/********************************
 * Setup params
 *******************************/
var filters = {
	"pdc": new PDCOptions("filters.pdc"),
	"searchBy": new SearchByOptions("filters.searchBy"),
	"group": new GroupFilter("filters.group"),
	"groupTiers": new TierList("filters.groupTiers"),
	"groupPattern": new PatternFilter("filters.groupPattern"),
	"alignedGroup": new AlignedGroupFilter("filters.alignedGroup"),
	"word": new WordFilter("filters.word"),
	"wordTiers": new TierList("filters.wordTiers"),
	"wordPattern": new PatternFilter("filters.wordPattern"),
	"alignedWord": new AlignedWordFilter("filters.alignedWord"),
	"syllable": new SyllableFilter("filters.syllable"),
	"speaker": new ParticipantFilter("filters.speaker")
};

var reportTitleParamInfo = {
	"id": "reportTitle",
	"title": "Report Title",
	"def": "Percent Diacritics Correct (PDC)",
	"prompt": "Enter report title"
};
var reportTitleParam;
var reportTitle = reportTitleParamInfo.def;

var combineParticipantsParamInfo = {
	"id": "combineParticipants",
	"title": "Combine results",
	"desc": "Combine results for all selected participants",
	"def": false
};
var combineParticipantsParam;
var combineParticipants = combineParticipantsParamInfo.def;

function setup_params(params) {
	reportTitleParam = new StringScriptParam(
			reportTitleParamInfo.id,
			reportTitleParamInfo.title,
			reportTitleParamInfo.def);
     reportTitleParam.setPrompt(reportTitleParamInfo.prompt);
	params.add(reportTitleParam);

	combineParticipantsParam = new BooleanScriptParam(
		combineParticipantsParamInfo.id,
		combineParticipantsParamInfo.desc,
		combineParticipantsParamInfo.title,
		combineParticipantsParamInfo.def);
	params.add(combineParticipantsParam);

	var optionsSep = new SeparatorScriptParam("Options", false);
	params.add(optionsSep);

	filters.pdc.param_setup(params);
	var insertIdx = params.size();

	filters.group.param_setup(params);
	filters.groupPattern.param_setup(params);

	var sep2 = new LabelScriptParam("", "<html><b>Aligned Group Filter</b></html>");
	params.add(sep2);
	filters.alignedGroup.param_setup(params);

	filters.word.searchByWordEnabled = true;
	filters.word.param_setup(params);
	filters.wordPattern.param_setup(params);

	var wordsep2 = new LabelScriptParam("", "<html><b>Aligned Word Filter</b></html>");
	params.add(wordsep2);
	filters.alignedWord.param_setup(params);
	var searchByWordListener = new java.beans.PropertyChangeListener {
		propertyChange: function (e) {
			var enabled = e.source.getValue(e.source.paramId);
			filters.wordPattern.setEnabled(enabled);
			filters.alignedWord.setEnabled(enabled);
			filters.wordTiers.setEnabled(enabled);
		}
	};
	filters.word.searchByWordParam.addPropertyChangeListener(filters.word.searchByWordParam.paramId, searchByWordListener);
	var enabled = filters.word.searchByWordParam.getValue(filters.word.searchByWordParam.paramId);
	filters.wordPattern.setEnabled(enabled);
	filters.alignedWord.setEnabled(enabled);

	filters.syllable.param_setup(params);

	filters.searchBy.includeSyllableOption = true;
	filters.searchBy.param_setup(params, filters.word.searchByWordParam, filters.syllable.searchBySyllableParam, insertIdx);

	var otherDataHeader = new SeparatorScriptParam("otherDataHeader", "Additional Tier Data", true);
	params.add(otherDataHeader);
	var sep = new LabelScriptParam("", "<html><b>Add aligned groups</b></html>");
	params.add(sep);
	filters.groupTiers.param_setup(params);
	var wordsep = new LabelScriptParam("", "<html><b>Add aligned words</b></html>");
	params.add(wordsep);
	filters.wordTiers.param_setup(params);
	filters.wordTiers.setEnabled(enabled);

	filters.speaker.param_setup(params);
}
]]></oga:property>
                    <oga:property key="filters.pdc.pattern.filter"><![CDATA[\w]]></oga:property>
                </oga:settings>
                <oga:meta x="48" y="666"/>
            </extensions>
        </node>
        <opqry:queryNode id="4552ff67" name="Query : Aligned IPA Domains" type="ca.phon.app.opgraph.nodes.query.QueryNode">
            <qry:query xmlns="http://phon.ling.mun.ca/ns/query" date="2021-03-25T07:43:06.216-02:30" name="Aligned IPA Domains" uuid="d3c0f539-070e-4ab9-b413-cce6966cf702">
                <script>
                    <url ref="Aligned IPA Domains" rel="stock"/>
                    <param id="filters.actualResultFilter.filterType">Phonex</param>
                    <param id="filters.alignedGroup.patternFilter.filterType">Plain text</param>
                    <param id="filters.alignedWord.patternFilter.filterType">Plain text</param>
                    <param id="filters.groupPattern.filterType">Plain text</param>
                    <param id="filters.searchBy.searchBy">Word</param>
                    <param id="filters.speaker.age1Comparator">equal to</param>
                    <param id="filters.speaker.age2Comparator">equal to</param>
                    <param id="filters.speaker.ageOperator">(select operator)</param>
                    <param id="filters.speaker.participantRole">(select role)</param>
                    <param id="filters.syllable.otherSyllTypePattern.filterType">Plain text</param>
                    <param id="filters.syllable.syllableType">Any syllable</param>
                    <param id="filters.targetResultFilter.filterType">Phonex</param>
                    <param id="filters.wordPattern.filterType">Plain text</param>
                    <param id="filters.wordTiers.tiers">Orthography</param>
                    <param id="searchTier">IPA Target</param>
                </script>
            </qry:query>
            <extensions>
                <oga:settings/>
                <oga:meta x="420" y="171"/>
            </extensions>
        </opqry:queryNode>
        <ogcn:macro id="1bedded791b945f4" name="Get Report Title" type="ca.phon.opgraph.nodes.general.MacroNode">
            <graph id="33eeba25">
                <node id="f5a56a7a058b447a" name="String#&lt;init&gt;(String)" type="class:ca.phon.opgraph.nodes.reflect.ConstructorNode">
                    <extensions>
                        <oga:settings>
                            <oga:property key="ca.phon.opgraph.nodes.reflect.ConstructorNode.classMember"><![CDATA[<init>(java.lang.String)]]></oga:property>
                            <oga:property key="ca.phon.opgraph.nodes.reflect.ConstructorNode.declaredClass"><![CDATA[java.lang.String]]></oga:property>
                        </oga:settings>
                        <oga:meta x="15" y="15">
                            <oga:default for="arg1" type="java.lang.String">reportTitle</oga:default>
                        </oga:meta>
                    </extensions>
                </node>
                <node id="2919ac8b24ce4ecd" name="Map#get(Object)" type="class:ca.phon.opgraph.nodes.reflect.MethodNode">
                    <extensions>
                        <oga:settings>
                            <oga:property key="ca.phon.opgraph.nodes.reflect.MethodNode.classMember"><![CDATA[get(java.lang.Object)]]></oga:property>
                            <oga:property key="ca.phon.opgraph.nodes.reflect.MethodNode.declaredClass"><![CDATA[java.util.Map]]></oga:property>
                        </oga:settings>
                        <oga:meta x="215" y="15"/>
                    </extensions>
                </node>
                <node id="90cade761f48de" name="Object#toString()" type="class:ca.phon.opgraph.nodes.reflect.MethodNode">
                    <extensions>
                        <oga:settings>
                            <oga:property key="ca.phon.opgraph.nodes.reflect.MethodNode.classMember"><![CDATA[toString()]]></oga:property>
                            <oga:property key="ca.phon.opgraph.nodes.reflect.MethodNode.declaredClass"><![CDATA[java.lang.Object]]></oga:property>
                        </oga:settings>
                        <oga:meta x="392" y="15"/>
                    </extensions>
                </node>
                <link dest="2919ac8b24ce4ecd" destField="arg1" source="f5a56a7a058b447a" sourceField="value"/>
                <link dest="90cade761f48de" destField="obj" source="2919ac8b24ce4ecd" sourceField="value"/>
            </graph>
            <ogcn:published_input field="obj" name="parameters" ref="2919ac8b24ce4ecd"/>
            <ogcn:published_output field="value" name="reportTitle" ref="90cade761f48de"/>
            <extensions>
                <oga:meta x="527" y="640"/>
            </extensions>
        </ogcn:macro>
        <ogcn:macro id="25dad8d281c248f6" name="combineParticipants" type="ca.phon.opgraph.nodes.general.MacroNode">
            <graph id="277b753e">
                <node id="56b9a3819b4f4a23" name="obj" type="class:ca.phon.opgraph.nodes.reflect.ObjectNode">
                    <extensions>
                        <oga:settings>
                            <oga:property key="ca.phon.opgraph.nodes.reflect.ObjectNode.declaredClass"><![CDATA[java.util.Map]]></oga:property>
                        </oga:settings>
                        <oga:meta x="271" y="993"/>
                    </extensions>
                </node>
                <node id="2f70e3036a984de3" type="class:ca.phon.opgraph.nodes.general.TextNode">
                    <extensions>
                        <oga:settings>
                            <oga:property key="ca.phon.opgraph.nodes.general.TextNode.text"/>
                        </oga:settings>
                        <oga:meta x="482" y="1110"/>
                    </extensions>
                </node>
                <node id="6d929ccfcac443fe" name="Map" type="class:ca.phon.opgraph.nodes.reflect.ObjectNode">
                    <extensions>
                        <oga:settings>
                            <oga:property key="ca.phon.opgraph.nodes.reflect.ObjectNode.declaredClass"><![CDATA[java.util.Map]]></oga:property>
                        </oga:settings>
                        <oga:meta x="481" y="1010"/>
                    </extensions>
                </node>
                <node id="5556106f4ee34754" name="Map#get(Object)" type="class:ca.phon.opgraph.nodes.reflect.MethodNode">
                    <extensions>
                        <oga:settings>
                            <oga:property key="ca.phon.opgraph.nodes.reflect.MethodNode.classMember"><![CDATA[get(java.lang.Object)]]></oga:property>
                            <oga:property key="ca.phon.opgraph.nodes.reflect.MethodNode.declaredClass"><![CDATA[java.util.Map]]></oga:property>
                        </oga:settings>
                        <oga:meta x="701" y="1029"/>
                    </extensions>
                </node>
                <node id="3278d9fc691d486e" name="Object" type="class:ca.phon.opgraph.nodes.reflect.ObjectNode">
                    <extensions>
                        <oga:settings>
                            <oga:property key="ca.phon.opgraph.nodes.reflect.ObjectNode.declaredClass"><![CDATA[java.lang.Object]]></oga:property>
                        </oga:settings>
                        <oga:meta x="897" y="1038"/>
                    </extensions>
                </node>
                <node id="e1f16e9cd0a040da" type="class:ca.phon.opgraph.nodes.reflect.ObjectCastNode">
                    <extensions>
                        <oga:settings>
                            <oga:property key="ca.phon.opgraph.nodes.reflect.ObjectCastNode.declaredClass"><![CDATA[java.lang.Boolean]]></oga:property>
                        </oga:settings>
                        <oga:meta x="1089" y="1051"/>
                    </extensions>
                </node>
                <link dest="5556106f4ee34754" destField="obj" source="6d929ccfcac443fe" sourceField="obj"/>
                <link dest="3278d9fc691d486e" destField="obj" source="5556106f4ee34754" sourceField="value"/>
                <link dest="e1f16e9cd0a040da" destField="obj" source="3278d9fc691d486e" sourceField="obj"/>
                <link dest="6d929ccfcac443fe" destField="obj" source="56b9a3819b4f4a23" sourceField="obj"/>
                <link dest="5556106f4ee34754" destField="arg1" source="2f70e3036a984de3" sourceField="value"/>
                <extensions>
                    <nes:settings type="ca.phon.app.opgraph.analysis.AnalysisOpGraphEditorModel"/>
                </extensions>
            </graph>
            <ogcn:published_input field="obj" name="obj" ref="56b9a3819b4f4a23"/>
            <ogcn:published_input field="format" name="format" ref="2f70e3036a984de3"/>
            <ogcn:published_output field="obj" name="value" ref="e1f16e9cd0a040da"/>
            <extensions>
                <oga:meta x="301" y="660">
                    <oga:default for="format" type="java.lang.String">combineParticipants</oga:default>
                </oga:meta>
            </extensions>
        </ogcn:macro>
        <node id="a689825cf56044ba" name="Extract Diacritic Options" type="class:ca.phon.app.opgraph.nodes.PhonScriptNode">
            <output name="ignoreDiacritics" type="java.lang.Boolean"/>
            <output name="onlyOrExcept" type="java.lang.Boolean"/>
            <output name="selectedDiacritics" type="java.util.Collection"/>
            <extensions>
                <oga:settings>
                    <oga:property key="__script"><![CDATA[importClass(Packages.ca.phon.query.script.params.DiacriticOptionsScriptParam)

var diacriticOptionsParamInfo = {
	"id": "filters.pdc.diacriticOptions",
	"desc": "Diacritic Options",
	"def": false,
	"retainDia": new java.util.ArrayList()
};
var diacriticOptionsParam;

var filters = {
	"pdc": {
		"diacriticOptions": {}
	}
};

function setup_params(params) {
	diacriticOptionsParam = new DiacriticOptionsScriptParam(
		diacriticOptionsParamInfo.id,
		diacriticOptionsParamInfo.desc,
		diacriticOptionsParamInfo.def,
		diacriticOptionsParamInfo.retainDia
	);
	params.add(diacriticOptionsParam);	
}

function init(inputs, outputs) {
	outputs.add("ignoreDiacritics", "", false, java.lang.Boolean);
	outputs.add("onlyOrExcept", "", false, java.lang.Boolean);
	outputs.add("selectedDiacritics", "", false, java.util.Collection);
}

function run(context) {
	var ignoreDiacritics = java.lang.Boolean.valueOf(
		filters.pdc.diacriticOptions.ignoreDiacritics || false);
	context.put("ignoreDiacritics", ignoreDiacritics);


	var onlyOrExcept = false;
	if(filters.pdc.diacriticOptions.selectionMode) {
		onlyOrExcept = (filters.pdc.diacriticOptions.selectionMode == "Only");
	}
		
	context.put("onlyOrExcept", onlyOrExcept);

	var selectedDiacritics = filters.pdc.diacriticOptions.selectedDiacritics || new java.util.List();
	context.put("selectedDiacritics", selectedDiacritics);
}
]]></oga:property>
                </oga:settings>
                <oga:meta x="135" y="786"/>
            </extensions>
        </node>
        <node id="69454401b0b34f1d" name="Get Listing Title" type="class:ca.phon.app.opgraph.nodes.PhonScriptNode">
            <output name="title" type="java.lang.String"/>
            <extensions>
                <oga:settings>
                    <oga:property key="filters.syllable.otherSyllTypePattern.filterType"><![CDATA[Plain text]]></oga:property>
                    <oga:property key="filters.syllable.syllableType"><![CDATA[Any syllable]]></oga:property>
                    <oga:property key="__script"><![CDATA[var GroupFilter = require("lib/GroupFilter").GroupFilter;
var WordFilter = require("lib/WordFilter").WordFilter;
var SyllableFilter = require("lib/SyllableFilter").SyllableFilter;

var filters = {
	"group": new GroupFilter("filters.group"),
	"word": new WordFilter("filters.word"),
	"syllable": new SyllableFilter("filters.syllable")
};

function init(intput, outputs) {
	outputs.add("title", "", false, java.lang.String);
}

function setup_params(params) {
	filters.group.param_setup(params);
	filters.word.param_setup(params);
	filters.syllable.param_setup(params);
}

function run(context) {
	var title = "PDC by ";
	var domain = "Group";

	if(filters.syllable.isUseFilter()) {
		domain = "Syllable";
	} else if(filters.word.isUseFilter()) {
		domain = "Word";
	}

	context.put("title", title + domain);
}
]]></oga:property>
                </oga:settings>
                <oga:meta x="598" y="805"/>
            </extensions>
        </node>
        <node id="4715d771" type="class:ca.phon.app.opgraph.nodes.table.ResultsToTableNode">
            <extensions>
                <oga:settings>
                    <oga:property key="includeSessionInfo"><![CDATA[true]]></oga:property>
                    <oga:property key="includeSpeakerInfo"><![CDATA[true]]></oga:property>
                    <oga:property key="includeMetadata"><![CDATA[true]]></oga:property>
                    <oga:property key="includeTierInfo"><![CDATA[true]]></oga:property>
                </oga:settings>
                <oga:meta x="672" y="180"/>
            </extensions>
        </node>
        <node id="4162376a" type="class:ca.phon.app.opgraph.nodes.SelectedParticipantsNode">
            <extensions>
                <oga:meta x="39" y="436"/>
            </extensions>
        </node>
        <node id="8d628415d9d646f8" type="class:ca.phon.app.opgraph.nodes.report.NewReportNode">
            <extensions>
                <oga:settings/>
                <oga:meta x="772" y="635"/>
            </extensions>
        </node>
        <node id="d8627d70b89e4950" name="PDC" type="class:ca.phon.app.opgraph.nodes.PhonScriptNode">
            <input name="table" optional="false"/>
            <output name="pdc" type="ca.phon.query.report.datasource.DefaultTableDataSource"/>
            <output name="resultsByPhone" type="ca.phon.query.report.datasource.DefaultTableDataSource"/>
            <extensions>
                <oga:settings>
                    <oga:property key="filters.pdc.pdcType"><![CDATA[All phones]]></oga:property>
                    <oga:property key="__script"><![CDATA[var PDC = require("lib/PDC").PDC;
var PDCOptions = require("lib/PDC").PDCOptions;

var filters = {
	"pdc": new PDCOptions("filters.pdc")
};

function init(inputs, outputs) {
	inputs.add("table", "", false,  false);
	
	outputs.add("pdc", "", false, DefaultTableDataSource);
	outputs.add("resultsByPhone", "", false, DefaultTableDataSource);
}

function setup_params(params) {
	filters.pdc.param_setup(params);
}

function setupColumns(table, inputTable) {
	var col = 0;

	for(var ic = 0; ic < inputTable.columnCount; ic++) {
		table.setColumnTitle(col++, inputTable.getColumnTitle(ic));
	}

	table.setColumnTitle(col++, "# Target");
	table.setColumnTitle(col++, "# Actual");
	table.setColumnTitle(col++, "# Correct");
	table.setColumnTitle(col++, "# Substituted");
	table.setColumnTitle(col++, "# Deleted");
	table.setColumnTitle(col++, "# Epenthesized");
	table.setColumnTitle(col++, "PDC");
}

function copyRow(inputTable, rowIdx) {
	var row = new Array();
	var col = 0;
	for(var cidx = 0; cidx < inputTable.columnCount; cidx++) {
		row[col++] = inputTable.getValueAt(rowIdx, cidx);
	}
	return row;
}

function run(context) {
	var table = context.get("table");

	var pdc = new DefaultTableDataSource();
	var resultsByPhone = new DefaultTableDataSource();
	
	// setup pdc columns
	setupColumns(pdc, table);
	
	var expCol = 0;
	resultsByPhone.setColumnTitle(expCol++, "Session");
	resultsByPhone.setColumnTitle(expCol++, "Date");
	resultsByPhone.setColumnTitle(expCol++, "Speaker");
	resultsByPhone.setColumnTitle(expCol++, "Age");
	resultsByPhone.setColumnTitle(expCol++, "Record #");
	resultsByPhone.setColumnTitle(expCol++, "Group #");
	resultsByPhone.setColumnTitle(expCol++, "IPA Target");
	resultsByPhone.setColumnTitle(expCol++, "IPA Actual");
	resultsByPhone.setColumnTitle(expCol++, "# Correct");
	resultsByPhone.setColumnTitle(expCol++, "# Substituted");
	resultsByPhone.setColumnTitle(expCol++, "# Deleted");
	resultsByPhone.setColumnTitle(expCol++, "# Epenthesized");

	for(var row = 0; row < table.rowCount; row++) {
		var ipaT = table.getValueAt(row, "IPA Target");
		var ipaA = table.getValueAt(row, "IPA Actual");
		var alignment = table.getValueAt(row, "Alignment");

		if(ipaT == null || ipaA == null || alignment == null) continue;
		if(alignment.length() == 0) continue;

		var phoneMap = PhoneMap.fromString(ipaT.audiblePhones(), 
			ipaA.audiblePhones(), alignment);

		var group = {
			getIPATarget: function() { return ipaT; },
			getIPAActual: function() { return ipaA; },
			getPhoneAlignment: function() { return phoneMap; }
		};

		var pdcData = PDC.calc_pdc(group, filters.pdc.pattern, filters.pdc.diacriticOptions);

		var pdcRow = copyRow(table, row);
		pdcRow.push(pdcData.target);
		pdcRow.push(pdcData.actual);
		pdcRow.push(pdcData.correct);
		pdcRow.push(pdcData.substituted);
		pdcRow.push(pdcData.deleted);
		pdcRow.push(pdcData.epen);

		if(pdcData.correct + pdcData.substituted 
		  + pdcData.deleted + pdcData.epen > 0) {
			var pdcVal = (pdcData.correct) /
				(pdcData.correct + pdcData.substituted 
		 			 + pdcData.deleted + pdcData.epen);
		 	pdcRow.push(java.lang.Float.valueOf(pdcVal * 100.0));
		} else {
			pdcRow.push(java.lang.Float.valueOf(0.0));
		}
		
		pdc.addRow(pdcRow);

		for(var i = 0; i < pdcData.expanded_results.length; i++) {
			var expResult = pdcData.expanded_results[i];
			var expRow = new Array();
			expCol = 0;
			expRow[expCol++] = table.getValueAt(row, "Session");
			expRow[expCol++] = table.getValueAt(row, "Date");
			expRow[expCol++] = table.getValueAt(row, "Speaker");
			expRow[expCol++] = table.getValueAt(row, "Age");
			expRow[expCol++] = table.getValueAt(row, "Record #");
			expRow[expCol++] = table.getValueAt(row, "Group #");
			expRow[expCol++] = (expResult.target >= 0 ? ipaT.cover('\u25cc', '\u25cc').elementAt(expResult.target) : new IPATranscript());
			expRow[expCol++] = (expResult.actual >= 0 ? ipaA.cover('\u25cc', '\u25cc').elementAt(expResult.actual) : new IPATranscript());
			expRow[expCol++] = expResult.correct;
			expRow[expCol++] = expResult.substituted;
			expRow[expCol++] = expResult.deleted;
			expRow[expCol++] = expResult.epen;

			resultsByPhone.addRow(expRow);
		}
	}

	context.put("pdc", pdc);
	context.put("resultsByPhone", resultsByPhone);
}]]></oga:property>
                    <oga:property key="filters.pdc.pattern.filter"><![CDATA[\w]]></oga:property>
                </oga:settings>
                <oga:meta x="981" y="100"/>
            </extensions>
        </node>
        <node id="208550fb" type="class:ca.phon.app.opgraph.nodes.report.ReportSectionHeaderNode">
            <extensions>
                <oga:meta x="1063" y="620">
                    <oga:default for="sectionName" type="java.lang.String">Summary</oga:default>
                </oga:meta>
            </extensions>
        </node>
        <ogcn:macro id="f9fd055c90654b22" type="ca.phon.app.opgraph.nodes.ForEachParticipant">
            <graph id="e7fdddd">
                <node id="4888b87c" name="Current Speaker" type="class:ca.phon.opgraph.nodes.reflect.ContextualItemClassNode">
                    <extensions>
                        <oga:settings>
                            <oga:property key="ca.phon.opgraph.nodes.reflect.ContextualItemClassNode.declaredClass"><![CDATA[ca.phon.session.Participant]]></oga:property>
                            <oga:property key="ca.phon.opgraph.nodes.reflect.ContextualItemClassNode.key"><![CDATA[_currentSpeaker]]></oga:property>
                        </oga:settings>
                        <oga:meta x="82" y="33"/>
                    </extensions>
                </node>
                <node id="14be4060" name="Speaker tables" type="class:ca.phon.app.opgraph.nodes.ForEachParticipant$ParticipantTableNode">
                    <output name="_tableExists1" type="java.lang.Boolean">Does Table #1 have data</output>
                    <output name="_speakerTable1" type="ca.phon.query.report.datasource.TableDataSource">Table #1</output>
                    <output name="_tableExists2" type="java.lang.Boolean">Does Table #2 have data</output>
                    <output name="_speakerTable2" type="ca.phon.query.report.datasource.TableDataSource">Table #2</output>
                    <extensions>
                        <oga:meta x="94" y="359"/>
                    </extensions>
                </node>
                <node id="173dace3" name="ReportTreeNode" type="class:ca.phon.opgraph.nodes.reflect.ObjectNode">
                    <extensions>
                        <oga:settings>
                            <oga:property key="ca.phon.opgraph.nodes.reflect.ObjectNode.declaredClass"><![CDATA[ca.phon.app.opgraph.report.tree.ReportTreeNode]]></oga:property>
                        </oga:settings>
                        <oga:meta x="93" y="559"/>
                    </extensions>
                </node>
                <node id="2924e2a" name="Summary Table" type="class:ca.phon.opgraph.nodes.reflect.ObjectNode">
                    <extensions>
                        <oga:settings>
                            <oga:property key="ca.phon.opgraph.nodes.reflect.ObjectNode.declaredClass"><![CDATA[ca.phon.query.report.datasource.TableDataSource]]></oga:property>
                        </oga:settings>
                        <oga:meta x="98" y="762"/>
                    </extensions>
                </node>
                <node id="46ad5d561d2a48b5" name="ignoreDiacritics" type="class:ca.phon.opgraph.nodes.reflect.ObjectNode">
                    <extensions>
                        <oga:settings>
                            <oga:property key="ca.phon.opgraph.nodes.reflect.ObjectNode.declaredClass"><![CDATA[java.lang.Boolean]]></oga:property>
                        </oga:settings>
                        <oga:meta x="105" y="908"/>
                    </extensions>
                </node>
                <node id="75f0f38b301648a9" name="onlyOrExcept" type="class:ca.phon.opgraph.nodes.reflect.ObjectNode">
                    <extensions>
                        <oga:settings>
                            <oga:property key="ca.phon.opgraph.nodes.reflect.ObjectNode.declaredClass"><![CDATA[java.lang.Boolean]]></oga:property>
                        </oga:settings>
                        <oga:meta x="107" y="1005"/>
                    </extensions>
                </node>
                <node id="b1bd5704667a4b70" name="selectedDiacritics" type="class:ca.phon.opgraph.nodes.reflect.ObjectNode">
                    <extensions>
                        <oga:settings>
                            <oga:property key="ca.phon.opgraph.nodes.reflect.ObjectNode.declaredClass"><![CDATA[java.util.Collection]]></oga:property>
                        </oga:settings>
                        <oga:meta x="109" y="1106"/>
                    </extensions>
                </node>
                <ogcn:macro id="7490685264e4c1e" name="If Speaker Has Results" type="ca.phon.opgraph.nodes.general.MacroNode">
                    <graph id="36be44b8">
                        <node id="429714d1b7d4403c" name="Global Summary" type="class:ca.phon.opgraph.nodes.reflect.ObjectNode">
                            <extensions>
                                <oga:settings>
                                    <oga:property key="ca.phon.opgraph.nodes.reflect.ObjectNode.declaredClass"><![CDATA[ca.phon.query.report.datasource.TableDataSource]]></oga:property>
                                </oga:settings>
                                <oga:meta x="44" y="81"/>
                            </extensions>
                        </node>
                        <node id="bdf63b3f1863486d" name="parent" type="class:ca.phon.opgraph.nodes.reflect.ObjectNode">
                            <extensions>
                                <oga:settings>
                                    <oga:property key="ca.phon.opgraph.nodes.reflect.ObjectNode.declaredClass"><![CDATA[ca.phon.app.opgraph.report.tree.ReportTreeNode]]></oga:property>
                                </oga:settings>
                                <oga:meta x="27" y="248"/>
                            </extensions>
                        </node>
                        <node id="320f32c9aaea420f" name="speaker" type="class:ca.phon.opgraph.nodes.reflect.ObjectNode">
                            <extensions>
                                <oga:settings>
                                    <oga:property key="ca.phon.opgraph.nodes.reflect.ObjectNode.declaredClass"><![CDATA[java.lang.Object]]></oga:property>
                                </oga:settings>
                                <oga:meta x="27" y="468"/>
                            </extensions>
                        </node>
                        <node id="9f9661a875b043a2" name="results" type="class:ca.phon.opgraph.nodes.reflect.ObjectNode">
                            <extensions>
                                <oga:settings>
                                    <oga:property key="ca.phon.opgraph.nodes.reflect.ObjectNode.declaredClass"><![CDATA[ca.phon.query.report.datasource.TableDataSource]]></oga:property>
                                </oga:settings>
                                <oga:meta x="65" y="715"/>
                            </extensions>
                        </node>
                        <node id="bf8283470ba84e9f" name="resultsByPhone" type="class:ca.phon.opgraph.nodes.reflect.ObjectNode">
                            <extensions>
                                <oga:settings>
                                    <oga:property key="ca.phon.opgraph.nodes.reflect.ObjectNode.declaredClass"><![CDATA[ca.phon.query.report.datasource.TableDataSource]]></oga:property>
                                </oga:settings>
                                <oga:meta x="67" y="866"/>
                            </extensions>
                        </node>
                        <node id="de2c089b856b4338" name="ignoreDiacritics" type="class:ca.phon.opgraph.nodes.reflect.ObjectNode">
                            <extensions>
                                <oga:settings>
                                    <oga:property key="ca.phon.opgraph.nodes.reflect.ObjectNode.declaredClass"><![CDATA[java.lang.Boolean]]></oga:property>
                                </oga:settings>
                                <oga:meta x="57" y="1075"/>
                            </extensions>
                        </node>
                        <node id="628f768909db48ec" name="onlyOrExcept" type="class:ca.phon.opgraph.nodes.reflect.ObjectNode">
                            <extensions>
                                <oga:settings>
                                    <oga:property key="ca.phon.opgraph.nodes.reflect.ObjectNode.declaredClass"><![CDATA[java.lang.Boolean]]></oga:property>
                                </oga:settings>
                                <oga:meta x="59" y="1172"/>
                            </extensions>
                        </node>
                        <node id="54f67ac21ffc4b8f" name="selectedDiacritics" type="class:ca.phon.opgraph.nodes.reflect.ObjectNode">
                            <extensions>
                                <oga:settings>
                                    <oga:property key="ca.phon.opgraph.nodes.reflect.ObjectNode.declaredClass"><![CDATA[java.util.Collection]]></oga:property>
                                </oga:settings>
                                <oga:meta x="61" y="1273"/>
                            </extensions>
                        </node>
                        <node id="c55a1198762540b7" name="Object#toString()" type="class:ca.phon.opgraph.nodes.reflect.MethodNode">
                            <extensions>
                                <oga:settings>
                                    <oga:property key="ca.phon.opgraph.nodes.reflect.MethodNode.classMember"><![CDATA[toString()]]></oga:property>
                                    <oga:property key="ca.phon.opgraph.nodes.reflect.MethodNode.declaredClass"><![CDATA[java.lang.Object]]></oga:property>
                                </oga:settings>
                                <oga:meta x="226" y="471"/>
                            </extensions>
                        </node>
                        <node id="b3b6e5688014e00" type="class:ca.phon.app.opgraph.nodes.table.InventoryNode">
                            <extensions>
                                <opqry:inventoryoptions>
                                    <opqry:automaticConfiguration configureAutomatically="false">
                                        <opqry:autoGrouping column="Session" grouping="true"/>
                                        <opqry:autoColumns caseSensitive="true" includeAdditionalGroupData="false" includeAdditionalWordData="false" includeMetadata="true"/>
                                    </opqry:automaticConfiguration>
                                    <opqry:column caseSensitive="true" column="Session"/>
                                    <opqry:sumColumns>
                                        <opqry:columnName># Target</opqry:columnName>
                                        <opqry:columnName># Actual</opqry:columnName>
                                        <opqry:columnName># Correct</opqry:columnName>
                                        <opqry:columnName># Substituted</opqry:columnName>
                                        <opqry:columnName># Deleted</opqry:columnName>
                                        <opqry:columnName># Epenthesized</opqry:columnName>
                                    </opqry:sumColumns>
                                </opqry:inventoryoptions>
                                <oga:settings/>
                                <oga:meta x="495" y="650"/>
                            </extensions>
                        </node>
                        <node id="b77e10073b094f64" type="class:ca.phon.app.opgraph.nodes.table.InventoryNode">
                            <extensions>
                                <opqry:inventoryoptions>
                                    <opqry:automaticConfiguration configureAutomatically="false">
                                        <opqry:autoGrouping column="Session" grouping="true"/>
                                        <opqry:autoColumns caseSensitive="true" includeAdditionalGroupData="false" includeAdditionalWordData="false" includeMetadata="true"/>
                                    </opqry:automaticConfiguration>
                                    <opqry:groupBy caseSensitive="true" column="Session"/>
                                    <opqry:column caseSensitive="true" column="IPA Target"/>
                                    <opqry:column caseSensitive="true" column="IPA Actual"/>
                                    <opqry:sumColumns>
                                        <opqry:columnName># Correct</opqry:columnName>
                                        <opqry:columnName># Substituted</opqry:columnName>
                                        <opqry:columnName># Deleted</opqry:columnName>
                                        <opqry:columnName># Epenthesized</opqry:columnName>
                                    </opqry:sumColumns>
                                </opqry:inventoryoptions>
                                <oga:settings/>
                                <oga:meta x="772" y="828"/>
                            </extensions>
                        </node>
                        <node id="eaf692c317bc48f8" type="class:ca.phon.app.opgraph.nodes.report.ReportSectionHeaderNode">
                            <extensions>
                                <oga:meta x="869" y="104"/>
                            </extensions>
                        </node>
                        <node id="3a011dc9b4234244" type="class:ca.phon.app.opgraph.nodes.table.ColumnSumNode">
                            <extensions>
                                <oga:settings>
                                    <oga:property key="columns"><![CDATA[# Target
# Actual
# Correct
# Substituted
# Deleted
# Epenthesized]]></oga:property>
                                </oga:settings>
                                <oga:meta x="692" y="650"/>
                            </extensions>
                        </node>
                        <node id="5b6be6d0637e4543" type="class:ca.phon.app.opgraph.nodes.table.SortNode">
                            <extensions>
                                <opqry:sortoptions autoSortOrder="ascending" configureAutomatically="false" likeOnTop="true">
                                    <opqry:sortBy column="IPA Target" order="ascending" type="ipa"/>
                                    <opqry:sortBy column="IPA Actual" order="ascending" type="ipa"/>
                                </opqry:sortoptions>
                                <oga:settings/>
                                <oga:meta x="969" y="828"/>
                            </extensions>
                        </node>
                        <node id="6439f0e582f54cec" type="class:ca.phon.app.opgraph.nodes.table.AddColumnNode">
                            <extensions>
                                <oga:settings>
                                    <oga:property key="column"><![CDATA[PDC]]></oga:property>
                                    <oga:property key="columnIndex"><![CDATA[-1]]></oga:property>
                                    <oga:property key="__script"><![CDATA[/*
params = {label, "Add a new column to the input table using javascript.", "<html><b>Add column to table</b></html>"}
;
*/

function getRowValue(table, row) {
	var correct = table.getValueAt(row, "# Correct").floatValue();
	var sub = table.getValueAt(row, "# Substituted").floatValue();
	var del = table.getValueAt(row, "# Deleted").floatValue();
	var epen = table.getValueAt(row, "# Epenthesized").floatValue();

	var pdc = 0.0;
	if(correct + sub + del + epen > 0) {
		pdc = (correct) / (correct + sub + del + epen);
		pdc *= 100.0;
	}
	return java.lang.Float.valueOf(pdc);
}
]]></oga:property>
                                </oga:settings>
                                <oga:meta x="899" y="642"/>
                            </extensions>
                        </node>
                        <node id="f277debea9644230" name="Summary Table" type="class:ca.phon.app.opgraph.nodes.report.TableSectionNode">
                            <extensions>
                                <oga:settings>
                                    <oga:property key="ca.phon.app.opgraph.nodes.report.TableSectionNode.includeColumns"><![CDATA[false]]></oga:property>
                                    <oga:property key="ca.phon.app.opgraph.nodes.report.TableSectionNode.columns"><![CDATA[Total]]></oga:property>
                                </oga:settings>
                                <oga:meta x="1118" y="104">
                                    <oga:default for="sectionName" type="java.lang.String">Summary</oga:default>
                                </oga:meta>
                            </extensions>
                        </node>
                        <node id="33d8745b7cfb4a41" name="Add to Global Summary" type="class:ca.phon.app.opgraph.nodes.PhonScriptNode">
                            <input name="speaker" optional="false"/>
                            <input name="globalSummary" optional="false"/>
                            <input name="speakerSummary" optional="false"/>
                            <output name="globalSummary" type="ca.phon.query.report.datasource.DefaultTableDataSource"/>
                            <extensions>
                                <oga:settings>
                                    <oga:property key="__script"><![CDATA[function init(inputs, outputs) {
	inputs.add("speaker", "", false, false);
	inputs.add("globalSummary", "", false, false);
	inputs.add("speakerSummary", "", false, false);

	outputs.add("globalSummary", "", false, DefaultTableDataSource);
}

function run(context) {
	var speaker = context.get("speaker");
	var globalSummary = context.get("globalSummary");
	var speakerSummary = context.get("speakerSummary");
	var speakerRow = speakerSummary.rowCount-1;

	var rowData = [];
	var col = 0;
	rowData[col++] = speaker;
	rowData[col++] = speakerSummary.getValueAt(speakerRow, "# Target");
	rowData[col++] = speakerSummary.getValueAt(speakerRow, "# Actual");
	rowData[col++] = speakerSummary.getValueAt(speakerRow, "# Correct");
	rowData[col++] = speakerSummary.getValueAt(speakerRow, "# Substituted");
	rowData[col++] = speakerSummary.getValueAt(speakerRow, "# Deleted");
	rowData[col++] = speakerSummary.getValueAt(speakerRow, "# Epenthesized");
	rowData[col++] = speakerSummary.getValueAt(speakerRow, "PDC");
	globalSummary.addRow(rowData);
}
]]></oga:property>
                                </oga:settings>
                                <oga:meta x="1337" y="625"/>
                            </extensions>
                        </node>
                        <node id="a900ae17a5fe47e4" name="Diacritic Patterns" type="class:ca.phon.app.opgraph.nodes.report.TableSectionNode">
                            <extensions>
                                <oga:settings>
                                    <oga:property key="ca.phon.app.opgraph.nodes.report.TableSectionNode.includeColumns"><![CDATA[true]]></oga:property>
                                    <oga:property key="ca.phon.app.opgraph.nodes.report.TableSectionNode.columns"/>
                                </oga:settings>
                                <oga:meta x="1383" y="102">
                                    <oga:default for="sectionName" type="java.lang.String">Diacritic Patterns</oga:default>
                                </oga:meta>
                            </extensions>
                        </node>
                        <link dest="3a011dc9b4234244" destField="table" source="b3b6e5688014e00" sourceField="table"/>
                        <link dest="eaf692c317bc48f8" destField="parent" source="bdf63b3f1863486d" sourceField="obj"/>
                        <link dest="33d8745b7cfb4a41" destField="speaker" source="320f32c9aaea420f" sourceField="obj"/>
                        <link dest="f277debea9644230" destField="table" source="6439f0e582f54cec" sourceField="table"/>
                        <link dest="33d8745b7cfb4a41" destField="speakerSummary" source="6439f0e582f54cec" sourceField="table"/>
                        <link dest="f277debea9644230" destField="parent" source="eaf692c317bc48f8" sourceField="section"/>
                        <link dest="c55a1198762540b7" destField="obj" source="320f32c9aaea420f" sourceField="obj"/>
                        <link dest="eaf692c317bc48f8" destField="sectionName" source="c55a1198762540b7" sourceField="value"/>
                        <link dest="6439f0e582f54cec" destField="table" source="3a011dc9b4234244" sourceField="table"/>
                        <link dest="5b6be6d0637e4543" destField="table" source="b77e10073b094f64" sourceField="table"/>
                        <link dest="a900ae17a5fe47e4" destField="parent" source="f277debea9644230" sourceField="parent"/>
                        <link dest="a900ae17a5fe47e4" destField="table" source="5b6be6d0637e4543" sourceField="table"/>
                        <link dest="b3b6e5688014e00" destField="table" source="9f9661a875b043a2" sourceField="obj"/>
                        <link dest="b77e10073b094f64" destField="table" source="bf8283470ba84e9f" sourceField="obj"/>
                        <link dest="33d8745b7cfb4a41" destField="globalSummary" source="429714d1b7d4403c" sourceField="obj"/>
                        <link dest="b77e10073b094f64" destField="ignoreDiacritics" source="de2c089b856b4338" sourceField="obj"/>
                        <link dest="b77e10073b094f64" destField="onlyOrExcept" source="628f768909db48ec" sourceField="obj"/>
                        <link dest="b77e10073b094f64" destField="selectedDiacritics" source="54f67ac21ffc4b8f" sourceField="obj"/>
                        <extensions>
                            <oga:notes>
                                <oga:note color="0xffff96" height="1380" title="Inputs" width="409" x="16" y="47"/>
                                <oga:note color="0xffc864" height="415" title="Report" width="878" x="795" y="26"/>
                                <oga:note color="0xffff96" height="244" title="Note" width="792" x="454" y="771"/>
                            </oga:notes>
                            <nes:settings type="ca.phon.app.opgraph.analysis.AnalysisOpGraphEditorModel"/>
                        </extensions>
                    </graph>
                    <ogcn:published_input field="obj" name="parent" ref="bdf63b3f1863486d"/>
                    <ogcn:published_input field="obj" name="speaker" ref="320f32c9aaea420f"/>
                    <ogcn:published_input field="obj" name="results" ref="9f9661a875b043a2"/>
                    <ogcn:published_input field="obj" name="resultsByPhone" ref="bf8283470ba84e9f"/>
                    <ogcn:published_input field="obj" name="globalSummary" ref="429714d1b7d4403c"/>
                    <ogcn:published_input field="obj" name="ignoreDiacritics" ref="de2c089b856b4338"/>
                    <ogcn:published_input field="obj" name="onlyOrExcept" ref="628f768909db48ec"/>
                    <ogcn:published_input field="obj" name="selectedDiacritics" ref="54f67ac21ffc4b8f"/>
                    <extensions>
                        <oga:meta x="969" y="117"/>
                    </extensions>
                </ogcn:macro>
                <node id="4aebaa0082d543cc" type="class:ca.phon.opgraph.nodes.logic.LogicalNotNode">
                    <extensions>
                        <oga:meta x="694" y="407"/>
                    </extensions>
                </node>
                <node id="2772882" name="Global Summary Output" type="class:ca.phon.opgraph.nodes.reflect.ObjectNode">
                    <extensions>
                        <oga:settings>
                            <oga:property key="ca.phon.opgraph.nodes.reflect.ObjectNode.declaredClass"><![CDATA[ca.phon.query.report.datasource.TableDataSource]]></oga:property>
                        </oga:settings>
                        <oga:meta x="1371" y="853"/>
                    </extensions>
                </node>
                <node id="2ee9d0008b5b4a68" name="Add to Global Summary" type="class:ca.phon.app.opgraph.nodes.PhonScriptNode">
                    <input name="speaker" optional="false"/>
                    <input name="globalSummary" optional="false"/>
                    <output name="globalSummary" type="ca.phon.query.report.datasource.DefaultTableDataSource"/>
                    <extensions>
                        <oga:settings>
                            <oga:property key="__script"><![CDATA[function init(inputs, outputs) {
	inputs.add("speaker", "", false, false);
	inputs.add("globalSummary", "", false, false);

	outputs.add("globalSummary", "", false, DefaultTableDataSource);
}

function run(context) {
	var speaker = context.get("speaker");
	var globalSummary = context.get("globalSummary");

	var rowData = [];
	var col = 0;
	rowData[col++] = speaker;
	rowData[col++] = 0;
	rowData[col++] = 0;
	rowData[col++] = 0;
	rowData[col++] = 0;
	rowData[col++] = 0;
	rowData[col++] = 0;
	rowData[col++] = 0.0;
	globalSummary.addRow(rowData);
}
]]></oga:property>
                        </oga:settings>
                        <oga:meta x="967" y="399"/>
                    </extensions>
                </node>
                <link dest="2ee9d0008b5b4a68" destField="enabled" source="4aebaa0082d543cc" sourceField="result"/>
                <link dest="4aebaa0082d543cc" destField="x" source="14be4060" sourceField="_tableExists1"/>
                <link dest="7490685264e4c1e" destField="parent" source="173dace3" sourceField="obj"/>
                <link dest="2ee9d0008b5b4a68" destField="globalSummary" source="2924e2a" sourceField="obj"/>
                <link dest="2772882" destField="obj" source="2924e2a" sourceField="obj"/>
                <link dest="7490685264e4c1e" destField="results" source="14be4060" sourceField="_speakerTable1"/>
                <link dest="7490685264e4c1e" destField="resultsByPhone" source="14be4060" sourceField="_speakerTable2"/>
                <link dest="7490685264e4c1e" destField="enabled" source="14be4060" sourceField="_tableExists1"/>
                <link dest="7490685264e4c1e" destField="speaker" source="4888b87c" sourceField="obj"/>
                <link dest="7490685264e4c1e" destField="globalSummary" source="2924e2a" sourceField="obj"/>
                <link dest="2ee9d0008b5b4a68" destField="speaker" source="4888b87c" sourceField="obj"/>
                <link dest="7490685264e4c1e" destField="ignoreDiacritics" source="46ad5d561d2a48b5" sourceField="obj"/>
                <link dest="7490685264e4c1e" destField="onlyOrExcept" source="75f0f38b301648a9" sourceField="obj"/>
                <link dest="7490685264e4c1e" destField="selectedDiacritics" source="b1bd5704667a4b70" sourceField="obj"/>
                <extensions>
                    <nes:settings type="ca.phon.app.opgraph.analysis.AnalysisOpGraphEditorModel"/>
                    <oga:notes>
                        <oga:note color="0xffff96" height="716" title="Inputs" width="358" x="42" y="514"/>
                        <oga:note color="0xffff96" height="490" title="Iteration" width="348" x="47" y="12"/>
                    </oga:notes>
                </extensions>
            </graph>
            <input name="_inputTable1" optional="true">Input table # 1</input>
            <input name="_inputTable2" optional="true">Input table # 2</input>
            <ogcn:published_input field="obj" name="reportNode" ref="173dace3"/>
            <ogcn:published_input field="obj" name="summaryTable" ref="2924e2a"/>
            <ogcn:published_input field="obj" name="ignoreDiacritics" ref="46ad5d561d2a48b5"/>
            <ogcn:published_input field="obj" name="onlyOrExcept" ref="75f0f38b301648a9"/>
            <ogcn:published_input field="obj" name="selectedDiacritics" ref="b1bd5704667a4b70"/>
            <ogcn:published_output field="obj" name="obj" ref="2772882"/>
            <extensions>
                <oga:settings>
                    <oga:property key="ca.phon.app.opgraph.nodes.ForEachParticipant.numTables"><![CDATA[2]]></oga:property>
                </oga:settings>
                <oga:meta x="1268" y="105"/>
            </extensions>
        </ogcn:macro>
        <node id="76fc55e5245842c0" type="class:ca.phon.app.opgraph.nodes.table.InventoryNode">
            <extensions>
                <opqry:inventoryoptions>
                    <opqry:automaticConfiguration configureAutomatically="false">
                        <opqry:autoGrouping column="Session" grouping="true"/>
                        <opqry:autoColumns caseSensitive="true" includeAdditionalGroupData="false" includeAdditionalWordData="false" includeMetadata="true"/>
                    </opqry:automaticConfiguration>
                    <opqry:groupBy caseSensitive="true" column="Session"/>
                    <opqry:column caseSensitive="true" column="IPA Target"/>
                    <opqry:column caseSensitive="true" column="IPA Actual"/>
                    <opqry:sumColumns>
                        <opqry:columnName># Correct</opqry:columnName>
                        <opqry:columnName># Substituted</opqry:columnName>
                        <opqry:columnName># Deleted</opqry:columnName>
                        <opqry:columnName># Epenthesized</opqry:columnName>
                    </opqry:sumColumns>
                </opqry:inventoryoptions>
                <oga:settings/>
                <oga:meta x="1072" y="922"/>
            </extensions>
        </node>
        <node id="235a65de" type="class:ca.phon.app.opgraph.nodes.report.TableSectionNode">
            <extensions>
                <oga:settings>
                    <oga:property key="ca.phon.app.opgraph.nodes.report.TableSectionNode.includeColumns"><![CDATA[true]]></oga:property>
                    <oga:property key="ca.phon.app.opgraph.nodes.report.TableSectionNode.columns"/>
                </oga:settings>
                <oga:meta x="1604" y="610">
                    <oga:default for="sectionName" type="java.lang.String"/>
                </oga:meta>
            </extensions>
        </node>
        <node id="6c87effba68a4ea9" type="class:ca.phon.app.opgraph.nodes.table.SortNode">
            <extensions>
                <opqry:sortoptions autoSortOrder="ascending" configureAutomatically="false" likeOnTop="true">
                    <opqry:sortBy column="IPA Target" order="ascending" type="ipa"/>
                    <opqry:sortBy column="IPA Actual" order="ascending" type="ipa"/>
                </opqry:sortoptions>
                <oga:settings/>
                <oga:meta x="1379" y="922"/>
            </extensions>
        </node>
        <node id="56f6619" type="class:ca.phon.app.opgraph.nodes.report.TableSectionNode">
            <extensions>
                <oga:settings>
                    <oga:property key="ca.phon.app.opgraph.nodes.report.TableSectionNode.includeColumns"><![CDATA[false]]></oga:property>
                    <oga:property key="ca.phon.app.opgraph.nodes.report.TableSectionNode.columns"><![CDATA[Date
Tier
Range
Result
Alignment]]></oga:property>
                </oga:settings>
                <oga:meta x="1084" y="1069"/>
            </extensions>
        </node>
        <node id="a2df32fdcc354a85" name="Diacritic Patterns" type="class:ca.phon.app.opgraph.nodes.report.TableSectionNode">
            <extensions>
                <oga:settings>
                    <oga:property key="ca.phon.app.opgraph.nodes.report.TableSectionNode.includeColumns"><![CDATA[true]]></oga:property>
                    <oga:property key="ca.phon.app.opgraph.nodes.report.TableSectionNode.columns"/>
                </oga:settings>
                <oga:meta x="1625" y="910">
                    <oga:default for="sectionName" type="java.lang.String">Diacritic Patterns</oga:default>
                </oga:meta>
            </extensions>
        </node>
        <link dest="1bedded791b945f4" destField="parameters" source="f563662586134d9a" sourceField="parameters"/>
        <link dest="8d628415d9d646f8" destField="reportName" source="1bedded791b945f4" sourceField="reportTitle"/>
        <link dest="d8627d70b89e4950" destField="parameters" source="f563662586134d9a" sourceField="parameters"/>
        <link dest="d8627d70b89e4950" destField="table" source="4715d771" sourceField="table"/>
        <link dest="208550fb" destField="parent" source="8d628415d9d646f8" sourceField="root"/>
        <link dest="235a65de" destField="parent" source="208550fb" sourceField="section"/>
        <link dest="6c87effba68a4ea9" destField="table" source="76fc55e5245842c0" sourceField="table"/>
        <link dest="a2df32fdcc354a85" destField="table" source="6c87effba68a4ea9" sourceField="table"/>
        <link dest="76fc55e5245842c0" destField="table" source="d8627d70b89e4950" sourceField="resultsByPhone"/>
        <link dest="a2df32fdcc354a85" destField="parent" source="235a65de" sourceField="parent"/>
        <link dest="69454401b0b34f1d" destField="parameters" source="f563662586134d9a" sourceField="parameters"/>
        <link dest="56f6619" destField="sectionName" source="69454401b0b34f1d" sourceField="title"/>
        <link dest="56f6619" destField="parent" source="8d628415d9d646f8" sourceField="root"/>
        <link dest="56f6619" destField="table" source="d8627d70b89e4950" sourceField="pdc"/>
        <link dest="a689825cf56044ba" destField="parameters" source="f563662586134d9a" sourceField="parameters"/>
        <link dest="4715d771" destField="project" source="4552ff67" sourceField="project"/>
        <link dest="4715d771" destField="results" source="4552ff67" sourceField="results"/>
        <link dest="4552ff67" destField="project" source="cd7bd3146bd74bb3" sourceField="obj"/>
        <link dest="4552ff67" destField="sessions" source="637e33845d18473d" sourceField="obj"/>
        <link dest="4552ff67" destField="parameters" source="f563662586134d9a" sourceField="parameters"/>
        <link dest="25dad8d281c248f6" destField="obj" source="f563662586134d9a" sourceField="parameters"/>
        <link dest="4162376a" destField="combine" source="25dad8d281c248f6" sourceField="value"/>
        <link dest="f9fd055c90654b22" destField="_inputTable1" source="d8627d70b89e4950" sourceField="pdc"/>
        <link dest="f9fd055c90654b22" destField="_inputTable2" source="d8627d70b89e4950" sourceField="resultsByPhone"/>
        <link dest="f9fd055c90654b22" destField="participants" source="4162376a" sourceField="participants"/>
        <link dest="f9fd055c90654b22" destField="reportNode" source="208550fb" sourceField="parent"/>
        <link dest="f9fd055c90654b22" destField="summaryTable" source="9c31168616a24188" sourceField="table"/>
        <link dest="56f6619" destField="enabled" source="f9fd055c90654b22" sourceField="finished"/>
        <link dest="76fc55e5245842c0" destField="ignoreDiacritics" source="a689825cf56044ba" sourceField="ignoreDiacritics"/>
        <link dest="76fc55e5245842c0" destField="onlyOrExcept" source="a689825cf56044ba" sourceField="onlyOrExcept"/>
        <link dest="76fc55e5245842c0" destField="selectedDiacritics" source="a689825cf56044ba" sourceField="selectedDiacritics"/>
        <link dest="f9fd055c90654b22" destField="ignoreDiacritics" source="a689825cf56044ba" sourceField="ignoreDiacritics"/>
        <link dest="f9fd055c90654b22" destField="onlyOrExcept" source="a689825cf56044ba" sourceField="onlyOrExcept"/>
        <link dest="f9fd055c90654b22" destField="selectedDiacritics" source="a689825cf56044ba" sourceField="selectedDiacritics"/>
        <link dest="235a65de" destField="table" source="f9fd055c90654b22" sourceField="obj"/>
        <extensions>
            <opqry:nodewizard type="ca.phon.app.opgraph.analysis.AnalysisWizardExtension">
                <opqry:info format="html" title="Percent Diacritics Correct">
                    <opqry:message/>
                </opqry:info>
                <opqry:node ref="f563662586134d9a" showAsStep="true">
                    <opqry:info format="html" title="Parameters">
                        <opqry:message/>
                    </opqry:info>
                </opqry:node>
            </opqry:nodewizard>
            <oga:notes>
                <oga:note color="0xffff96" height="537" title="Analysis Inputs" width="379" x="10" y="10">These inputs are provided to all analyses.</oga:note>
                <oga:note color="0xffc864" height="449" title="Start Report" width="972" x="19" y="580">Reports are created in a tree structure. When combined using the Analysis Composer the report tree created by the 'New Report' node will be added as a subtree to the larger report.</oga:note>
                <oga:note color="0x9696ff" height="538" title="Query" width="531" x="400" y="10">Execute a Phones query using options setup in Parameters node</oga:note>
                <oga:note color="0x96ff96" height="557" title="Percent Diacritics Correct (PDC)" width="960" x="956" y="-4">This node executes the PDC analysis and outputs 2 tables. The 'pdc' table is a copy of the input table with PDC calculation columns added. The 'resultsByPhone' table is a table of each analyized phone - the analysis includes a filter for deciding which phones are included in the analysis.</oga:note>
                <oga:note color="0xffff96" height="716" title="Note" width="885" x="1018" y="577"/>
            </oga:notes>
            <nes:settings type="ca.phon.app.opgraph.analysis.AnalysisOpGraphEditorModel"/>
        </extensions>
    </graph>
</opgraph>
